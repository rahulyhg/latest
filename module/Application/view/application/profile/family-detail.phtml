<?php
// \Zend\Debug\Debug::dump($this->GalleryInfo['grand_mother']['image_path']);
$father_id = $this->familyInfoArray['father_id']; //this valiable is using
$father_ref_no = $this->familyInfoArray['father_ref_no']; //this valiable is using
$mother_id = $this->familyInfoArray['mother_id']; //this valiable is using
$mother_ref_no = $this->familyInfoArray['mother_ref_no']; //this valiable is using
$spouse_id = $this->familyInfoArray['spouse_id']; //this valiable is using
$spouse_ref_no = $this->familyInfoArray['spouse_ref_no']; //this valiable is using
$grand_mother_id = $this->familyInfoArray['grand_mother_id']; //this valiable is using
$grand_mother_ref_no = $this->familyInfoArray['grand_mother_ref_no']; //this valiable is using
$grand_father_id = $this->familyInfoArray['grand_father_id']; //this valiable is using
$grand_father_ref_no = $this->familyInfoArray['grand_father_ref_no']; //this valiable is using
$grand_grand_mother_id = $this->familyInfoArray['grand_grand_mother_id']; //this valiable is using
$grand_grand_mother_ref_no = $this->familyInfoArray['grand_grand_mother_ref_no']; //this valiable is using
$grand_grand_father_id = $this->familyInfoArray['grand_grand_father_id']; //this valiable is using
$grand_grand_father_ref_no = $this->familyInfoArray['grand_grand_father_ref_no']; //this valiable is using
//\Zend\Debug\Debug::dump($this->familyInfoArray);
//\Zend\Debug\Debug::dump($this->brotherData);
//\Zend\Debug\Debug::dump($this->kidsDataJson);
//Zend\Debug\Debug::dump($userInfo);
//echo 'aa'.$this->userInfo->getMaritalStatus();
?>

<style>

    .preview_img{width:150px; margin:auto 10px 10px 0px !important; float:left;}
    .avatar-view img{height:110px!important;}
    .table {float:left !important;}
    .show_allocation_detail{margin-bottom:0px; cursor:pointer;color:#428bca;width:100%;}


    .orange-panelbg .col-sm-9 {
        background-color: #fff;
        min-height: 75px;
    } 


</style>

<style type="text/css">

</style>

<?php
echo $this->headLink()
        ->prependStylesheet($this->basePath() . '/css/componant-vs-14.css')
?>

<div class="col-sm-3 col-sm-3-new width20per">
    <?php //echo $this->partial('layout/sidebar-user')  ?>
    <?php include('sidebar_left_member.phtml'); ?>
</div>


<div class="col-sm-9 width80per">
    <?php include('main_info.phtml'); ?>

    <div class="clearfix"></div>
    <?php include('menu.phtml'); ?>  
    <div class="tab-content">
        <div id="family_info" class="tab-pane fade in active" style="">
            <table width="100%">
                <tr>
                    <td>  
                        <?php
                        $form = $this->form;
                        $form->prepare();
                        echo $this->form()->openTag($form);
                        echo $this->formHidden($form->get('id'));
                        echo $this->formHidden($form->get('user_id'));
                        ?>
                        <input type="hidden" name="family_id" value="<?php echo htmlentities(serialize($this->familyInfoArray)) ?>">   
                        <div class="col-sm-4" style="width:100%;">
                            <h3><?php echo $this->translate('Update About Family') ?></h3> 

                            <div class="form-group row" >
                                <label for="Education Field" class="col-sm-2 form-control-label lblline"><?php echo $this->translate('Marital Status') ?></label>
                                <div class="col-sm-9" style="height:auto !important; min-height: 0; padding:9px 0 0 0;">
                                    <div class="col-sm-1"><input type="radio" name="marital_status" value="Never Married" <?php echo ($this->userInfo->getMaritalStatus() == "Never Married") ? "checked='checked'" : ""; ?>   class="mrtlrd"/></div>
                                    <label class="col-sm-1 lableforstatusm">Never Married</label>
                                    <div class="col-sm-1"><input type="radio" name="marital_status" value="Married"  <?php echo ($this->userInfo->getMaritalStatus() == "Married") ? "checked='checked'" : ""; ?> class="mrtlrd"/></div>
                                    <label class="col-sm-1 lableforstatusm">Married</label>
                                    <div class="col-sm-1"><input type="radio" name="marital_status" value="Divorced" <?php echo ($this->userInfo->getMaritalStatus() == "Divorced") ? "checked='checked'" : ""; ?> class="mrtlrd"/></div>
                                    <label class="col-sm-1 lableforstatusm">Divorced</label>			
                                    <div class="col-sm-1"><input type="radio" name="marital_status" value="Widowed" <?php echo ($this->userInfo->getMaritalStatus() == "Widowed") ? "checked='checked'" : ""; ?>  class="mrtlrd"/></div>
                                    <label class="col-sm-1 lableforstatusm">Widowed</label>
                                    <div class="col-sm-1"><input type="radio" name="marital_status" value="Separated" <?php echo ($this->userInfo->getMaritalStatus() == "Separated") ? "checked='checked'" : ""; ?> class="mrtlrd"/></div>
                                    <label class="col-sm-2 lableforstatusm">Separated</label>			
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Family Values'); ?></label>
                                <div class="col-sm-3"><?php echo $this->formRow($form->get('family_values')); ?></div>


                                <div class="col-sm-3"></div>
                            </div>

                            <!---***************Spouse & Kids Info here**************************************************************************-->
                            <div class="Family_Details_married">

                                <h3><strong><?php echo $this->translate('Spouse Details') ?></strong></h3>

                                <div class="form-group row">
                                    <label for="City" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name') ?></label>        
                                    <div class="col-sm-3 coltilte" ><?php echo $this->formRow($form->get('name_title_spouse')); ?><div id="result" class="result"></div></div>
                                    <div class="col-sm-3 colname"> <?php echo $this->formRow($form->get('spouse_name')); ?>
                                        <?php echo $this->formRow($form->get('spouse_id')); ?>
                                        <?php echo $this->formRow($form->get('new_spouse_id')); ?>
                                        <div id="result_spouse" class="result"></div>

                                    </div>

                                    <label for="spouse_last_name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name'); ?></label>
                                    <div class="col-sm-3"> <?php echo $this->formRow($form->get('spouse_last_name')); ?></div>		
                                </div> 

                                <div class="form-group row">
                                    <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label>
                                    <div class="col-sm-3"> <?php echo $this->formRow($form->get('spouse_dob')); ?></div>
                                    <label for="State" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('spouse_status')); ?></div>
		                   
                                </div>

                                <div class="form-group row" id="spouse_dod_row" style="display:none;">
                                    <label for="State" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('spouse_died_on')); ?></div>
                                    <div class="col-sm-3"></div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 form-control-label edupading" for="About Spouse"><?php echo $this->translate('About') ?></label>
                                    <div class="col-sm-9" style="padding:0;">
                                        <textarea class="form-control" name="about_spouse" id="about_spouse" style="height:50px;" placeholder="About Spouse"><?php echo $this->familyInfoArray['about_spouse'] ?></textarea>
                                    </div>

                                </div>

                                <h3><strong><?php echo $this->translate('Kids Details') ?></strong></h3>

                                <div class="form-group row">
                                    <label for="City" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('No of Kids') ?></label>
                                    <div class="col-sm-3">
                                        <select name="numkid" class="form-control" id="noofkids">
                                            <?php for ($kids = 0; $kids < 5; $kids++) { ?>
                                                <option value="<?php echo $kids; ?>" <?php echo $kids === count($this->kidsData) ? "selected='selected'" : ""; ?>><?php echo $kids; ?></option>

                                            <?php } ?>      
                                        </select>        
                                    </div>
                                    <label for="State" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('') ?></label>
                                    <div class="col-sm-3"></div>
                                </div>        
                                <div id="kidDiv"></div>			
                            </div>  
                            <!---***************Spouse & Kids Info End here*****************************************************************-->




                            <!---******************************Father Info starts here*****************************************************-->

                            <h3><strong><?php echo $this->translate('Father Details') ?></strong></h3>

                            <div class="form-group row">
                                <label for="Full Name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label>
                                <div class="col-sm-3 coltilte" ><?php echo $this->formRow($form->get('name_title_father')); ?></div>
                                <div class="col-sm-3 colname"><?php echo $this->formRow($form->get('father_name')); ?>
                                    <?php echo $this->formRow($form->get('father_id')); ?>
                                    <?php echo $this->formRow($form->get('new_father_id')); ?>
                                    <div id="result_father" class="result"></div>
                                </div>
                                <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name'); ?></label>
                                <div class="col-sm-3"> <?php echo $this->formRow($form->get('father_last_name')); ?></div>
                            </div>

                            <div class="form-group row">
                                 <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label>
                                <div class="col-sm-3"> <?php echo $this->formRow($form->get('father_dob')); ?></div>
                    
                                <label for="Gender" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label>
                                <div class="col-sm-3"><?php echo $this->formRow($form->get('father_status')); ?></div>
                                </div>



                            <div class="form-group row" id="father_dod_row" style="display:none;">
                                <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD') ?></label>
                                <div class="col-sm-3"><?php echo $this->formRow($form->get('father_dod')); ?></div>
                                <div class="col-sm-3"></div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2 form-control-label edupading" for="About Father">About</label>
                                <div class="col-sm-9" style="padding:0;">
                                    <textarea class="form-control" id="about_father" name="about_father" style="height:50px;" placeholder="About Father"><?php echo $this->familyInfoArray['about_father'] ?></textarea>
                                </div>

                            </div>



                            <!---******************************Father Info ends here*****************************************************-->


                            <!---******************************Mother Info starts here*****************************************************-->

                            <h3><strong><?php echo $this->translate('Mother Details') ?></strong></h3>

                            <div class="form-group row">
                                <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label>        
                                <div class="col-sm-3 coltilte" ><?php echo $this->formRow($form->get('name_title_mother')); ?></div>
                                <div class="col-sm-3 colname"> <?php echo $this->formRow($form->get('mother_name')); ?>
                                    <?php echo $this->formRow($form->get('mother_id')); ?>
                                    <?php echo $this->formRow($form->get('new_mother_id')); ?>
                                    <div id="result_mother" class="result"></div>
                                </div>
                                <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name'); ?></label>
                                <div class="col-sm-3"> <?php echo $this->formRow($form->get('mother_last_name')); ?></div>
                            </div>

                            <div class="form-group row">
                                <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label>
                                <div class="col-sm-3"> <?php echo $this->formRow($form->get('mother_dob')); ?></div>
                                <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label>
                                <div class="col-sm-3"><?php echo $this->formRow($form->get('mother_status')); ?></div>
                                
                            </div>




                            <div class="form-group row" id="mother_dod_row" style="display:none;">
                                <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD') ?></label>
                                <div class="col-sm-3"><?php echo $this->formRow($form->get('mother_dod')); ?></div>
                                <div class="col-sm-3"></div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2 form-control-label edupading" for="About"><?php echo $this->translate('About') ?></label>
                                <div class="col-sm-9" style="padding:0; height: 35px;">
                                    <textarea class="form-control" name="about_mother" id="about_mother" style="height:50px;" placeholder="About Mother"><?php echo $this->familyInfoArray['about_mother'] ?></textarea>
                                </div>
                            </div>


                            <!---******************************Mother Info ends here*****************************************************-->








                            <!---******************************Brothers Info start here*****************************************************-->

                            <h3><strong><?php echo $this->translate('Brother Details') ?></strong></h3>

                            <div class="form-group row">
                                <label for="Brother Details" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('No of Brothers'); ?></label>
                                <div class="col-sm-3"> 

                                    <select class="form-control dropFamily" name="numbor" id="noofbro" > <!--onchange="GetSelectedTextValue(this)"; -->
                                        <?php for ($i = 0; $i < 8; $i++) { ?>
                                            <option value="<?php echo $i; ?>" <?php echo $i === $this->familyInfoObject->getNumbor() ? "selected='selected'" : ""; ?>><?php echo $i; ?></option>

                                        <?php } ?>

                                    </select>

                                </div>
                                <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('') ?></label>
                                <div class="col-sm-3"></div>
                            </div>        
                            <div id="textboxDiv"></div>
                            <!---******************************Brothers Info ends here*****************************************************-->


                            <!---******************************Sisters Info start here*****************************************************-->
                            <h3><strong><?php echo $this->translate('Sister Details') ?></strong></h3>

                            <div class="form-group row">
                                <label for="grand_fatherName" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('No of Sisters'); ?></label>
                                <div class="col-sm-3"> 
                                    <select class="form-control dropFamily" name="numsis" id="noofsis" >
                                        <?php for ($sis = 0; $sis < 5; $sis++) { ?>
                                            <option value="<?php echo $sis; ?>" <?php echo $sis === count($this->sisterData) ? "selected='selected'" : ""; ?>><?php echo $sis; ?></option>

                                        <?php } ?>      
                                    </select>
                                </div>
                                <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('') ?></label>
                                <div class="col-sm-3"></div>
                            </div>        
                            <div id="sisterDiv"></div> 
                            <!---******************************Sisters Info ends here*****************************************************-->






                            <!---******************************Grand Father Info starts here*****************************************************-->
                            <h3><strong><?php echo $this->translate('Grand Father Details') ?></strong></h3>

                            <div class="form-group row">
                                <label for="grand_fatherName" class="col-sm-2 form-control-label edupading" style="width:50%; line-height: normal;"><?php echo $this->translate('Do You have the details of Grand Father'); ?></label>
                                <div class="col-sm-2" style="width:10%;">
                                    <input name="gf" type="radio" <?php if (isset($this->familyInfoArray['grand_father_id'])) echo "checked"; ?> value="yes" id="showgf" /> Yes 
                                </div>
                                <div class="col-sm-2"><input name="gf" type="radio" value="" id="hidegf" /> No</div>
                            </div>
                            <div id="gf" <?php if (isset($this->familyInfoArray['grand_father_id'])) { ?> style="display:block;" <?php } else { ?>  style="display:none;" <?php } ?>>        
                                <div class="form-group row">
                                    <label for="grand_fatherName" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label>
                                    <div class="col-sm-3 coltilte" ><?php echo $this->formRow($form->get('name_title_grand_father')); ?></div>
                                    <div class="col-sm-3 colname"> <?php echo $this->formRow($form->get('grand_father_name')); ?></div>
                                    <label for="grand_father_last_name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_father_last_name')); ?></div>
                                </div>

                                <div class="form-group row">
                                    <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_father_dob')); ?></div>
                                   <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_father_status')); ?></div>
                                </div>

                                <div class="form-group row" id="g_father_dod_row" style="display:none;">
                                    <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_father_dod')); ?></div>
                                    <div class="col-sm-3"></div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 form-control-label edupading" for="About grand_father"><?php echo $this->translate('About') ?></label>
                                    <div class="col-sm-9" style="padding:0;">
                                        <textarea class="form-control" name="about_grand_father" style="height:50px;" placeholder="About Grand Father"><?php echo $this->familyInfoArray['about_grand_father'] ?></textarea>
                                    </div>

                                </div>
                            </div>
                            <!---******************************Grand Father Info ends here*****************************************************-->





                            <!---******************************Grand Mother Info starts here*****************************************************-->
                            <h3><strong><?php echo $this->translate('Grand Mother Details') ?></strong></h3>
                            <div class="form-group row">
                                <label for="grand_fatherName" class="col-sm-2 form-control-label edupading" style="width:50%; line-height: normal;"><?php echo $this->translate('Do You have the details of Grand Mother'); ?></label>
                                <div class="col-sm-2" style="width:10%;">
                                    <input name="gm" type="radio" <?php if (isset($this->familyInfoArray['grand_mother_id'])) echo "checked"; ?> value="yes" id="showgm" /> Yes 
                                </div>
                                <div class="col-sm-2"><input name="gm" type="radio" value="" id="hidegm" /> No</div>
                            </div>
                            <div id="gm" <?php if (isset($this->familyInfoArray['grand_mother_id'])) { ?> style="display:block;" <?php } else { ?>  style="display:none;" <?php } ?>>
                                <div class="form-group row">
                                    <label for="grand_fatherName" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label>
                                    <div class="col-sm-3 coltilte" ><?php echo $this->formRow($form->get('name_title_grand_mother')); ?></div>
                                    <div class="col-sm-3 colname"> <?php echo $this->formRow($form->get('grand_mother_name')); ?></div>
                                    <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_mother_last_name')); ?></div>
                                </div>		
                                <div class="form-group row">
                                    <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label>
                                    <div class="col-sm-3"> <?php echo $this->formRow($form->get('grand_mother_dob')); ?></div>
                                     <label for="status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_mother_status')); ?></div>
                                
                                </div>

                                <div class="form-group row" id="g_mother_dod_row" style="display:none;">
                                    <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_mother_dod')); ?></div>
                                    <div class="col-sm-3"></div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 form-control-label edupading" for="About grand_mother"><?php echo $this->translate('About') ?></label>
                                    <div class="col-sm-9" style="padding:0;">
                                        <textarea class="form-control" name="about_grand_mother" style="height:50px;" placeholder="About Grand Mother"><?php echo $this->familyInfoArray['about_grand_mother'] ?></textarea>
                                    </div>

                                </div>
                            </div>
                            <!---******************************Grand Mother Info ends here*****************************************************-->







                            <!---******************************Grand Grand Father Info start here*****************************************************-->

                            <h3><strong><?php echo $this->translate('Grand Grand Father Details') ?></strong></h3>

                            <div class="form-group row">
                                <label for="grand_fatherName" class="col-sm-2 form-control-label edupading" style="width:50%; line-height: normal;"><?php echo $this->translate('Do You have the details of G. Grand Father'); ?></label>
                                <div class="col-sm-2" style="width:10%;">
                                    <input name="ggf" type="radio" <?php if (isset($this->familyInfoArray['grand_grand_father_id'])) echo "checked"; ?> value="yes" id="show1" /> Yes 
                                </div>
                                <div class="col-sm-2"><input name="ggf" type="radio" value="" id="hide1" /> No</div>
                            </div>
                            <div id="ggf" <?php if (isset($this->familyInfoArray['grand_grand_father_id'])) { ?> style="display:block;" <?php } else { ?>  style="display:none;" <?php } ?>>
                                <div class="form-group row">
                                    <label for="grand_fatherName" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label>

                                    <div class="col-sm-3 coltilte" ><?php echo $this->formRow($form->get('name_title_grand_grand_father')); ?></div>
                                    <div class="col-sm-3 colname"> <?php echo $this->formRow($form->get('grand_grand_father_name')); ?></div>
                                    <label for="Last Name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_grand_father_last_name')); ?></div>
                                </div>

                                <div class="form-group row">
                                    <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label>
                                    <div class="col-sm-3"> <?php echo $this->formRow($form->get('grand_grand_father_dob')); ?></div>
                                   <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_grand_father_status')); ?></div>
                                 
                                </div>

                                <div class="form-group row" id="gg_father_dod_row" style="display:none;">
                                    <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_grand_father_dod')); ?></div>
                                    <div class="col-sm-3"></div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 form-control-label edupading" for="About grand_grand_father">About</label>
                                    <div class="col-sm-9" style="padding:0;">
                                        <textarea class="form-control" name="about_grand_grand_father" style="height:50px;" placeholder="About Grand Grand Father"><?php echo $this->familyInfoArray['about_grand_grand_father'] ?></textarea>
                                    </div>

                                </div>
                            </div>
                            <!---******************************Grand Grand Father Info ends here*****************************************************-->


                            <!---******************************Grand Grand Mother Info start here*****************************************************-->

                            <h3><strong><?php echo $this->translate('Grand Grand Mother Details') ?></strong></h3>

                            <div class="form-group row">
                                <label for="grand_fatherName" class="col-sm-2 form-control-label edupading" style="width:50%; line-height: normal;"><?php echo $this->translate('Do You have the details of G. Grand Mother'); ?></label>
                                <div class="col-sm-2" style="width:10%;">
                                    <input name="ggm" type="radio" <?php if (isset($this->familyInfoArray['grand_grand_mother_id'])) echo "checked"; ?> value="yes" id="show" /> Yes 
                                </div>
                                <div class="col-sm-2"><input name="ggm" type="radio" value="" id="hide" /> No</div>
                            </div>
                            <div id="ggm" <?php if (isset($this->familyInfoArray['grand_grand_mother_id'])) { ?> style="display:block;" <?php } else { ?>  style="display:none;" <?php } ?>>
                                <div class="form-group row">
                                    <label for="grand_fatherName" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label>		
                                    <div class="col-sm-3 coltilte" ><?php echo $this->formRow($form->get('name_title_grand_grand_mother')); ?></div>
                                    <div class="col-sm-3 colname"> <?php echo $this->formRow($form->get('grand_grand_mother_name')); ?></div>
                                    <label for="last name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_grand_mother_last_name')); ?></div>
                                </div>

                                <div class="form-group row">
                                    <label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label>
                                    <div class="col-sm-3"> <?php echo $this->formRow($form->get('grand_grand_mother_dob')); ?></div>
                                    <label for="status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_grand_mother_status')); ?></div>
                                
                                    
                                </div>

                                <div class="form-group row" id="gg_mother_dod_row" style="display:none;">
                                    <label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD') ?></label>
                                    <div class="col-sm-3"><?php echo $this->formRow($form->get('grand_grand_mother_dod')); ?></div>
                                    <div class="col-sm-3"></div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 form-control-label edupading" for="About grand_grand_mother">About</label>
                                    <div class="col-sm-9" style="padding:0;">
                                        <textarea class="form-control" name="about_grand_grand_mother" style="height:50px;" placeholder="About Grand Grand Mother"><?php echo $this->familyInfoArray['about_grand_grand_mother'] ?></textarea>
                                    </div>

                                </div>
                            </div>
                            <!---******************************Grand Grand Mother Info ends here*****************************************************-->
















                            <div class="form-group row">
                                <label for="City" class="col-sm-2 form-control-label edupading"></label>
                                <div class="col-sm-3"></div>
                                <label for="City" class="col-sm-2 form-control-label edupading"></label>
                                <div class="col-sm-3"><?php echo $this->formRow($form->get('submit')); ?>
                                    <input name="submit" id="submitnext" class="btn btn-default" value="Save & Next" type="submit"></div>
                            </div>	  
                        </div>
                        <?php echo $this->form()->closeTag(); ?>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
<?php // var_dump($this->sisDataJson); exit; ?>
<script>
    var userId=<?php echo $user_id?>;
    
    $(document).ready(function () {
        //*************** add css to date fieds**********
        $(".inputDate").css('cursor', 'pointer');
        //***********************************************
        var status_live = $('#spouse_status').val();
        if (status_live == "Passed Away") {
            $("#spouse_dod_row").css('display', 'block');
        } else {
            $("#spouse_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#father_status').val();
        if (status_live == "Passed Away") {
            $("#father_dod_row").css('display', 'block');
        } else {
            $("#father_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#mother_status').val();
        if (status_live == "Passed Away") {
            $("#mother_dod_row").css('display', 'block');
        } else {
            $("#mother_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#grand_father_status').val();
        if (status_live == "Passed Away") {
            $("#g_father_dod_row").css('display', 'block');
        } else {
            $("#g_father_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#grand_mother_status').val();
        if (status_live == "Passed Away") {
            $("#g_mother_dod_row").css('display', 'block');
        } else {
            $("#g_mother_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#grand_grand_father_status').val();
        if (status_live == "Passed Away") {
            $("#gg_father_dod_row").css('display', 'block');
        } else {
            $("#gg_father_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#grand_grand_mother_status').val();
        if (status_live == "Passed Away") {
            $("#gg_mother_dod_row").css('display', 'block');
        } else {
            $("#gg_mother_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#spouse_fatherStatus').val();
        if (status_live == "Passed Away") {
            $("#spouse_father_dod_row").css('display', 'block');
        } else {
            $("#spouse_father_dod_row").css('display', 'none');
        }
        //***********************************************
        var status_live = $('#spouse_motherStatus').val();
        if (status_live == "Passed Away") {
            $("#spouse_mother_dod_row").css('display', 'block');
        } else {
            $("#spouse_mother_dod_row").css('display', 'none');
        }

    });
</script>
<!---****************************************************************************
**********************************************************************************-->


<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36251023-1']);
    _gaq.push(['_setDomainName', 'jqueryscript.net']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();

</script>

<script>
    $(document).ready(function () {
        $("#hide").on('click', function () {
            $("#ggm").hide();
        });

        $("#show").on('click', function () {
            $("#ggm").show();
        });

        $("#hide1").on('click', function () {
            $("#ggf").hide();
        });

        $("#show1").on('click', function () {
            $("#ggf").show();
        });

        $("#hidegm").on('click', function () {
            $("#gm").hide();
        });

        $("#showgm").on('click', function () {
            $("#gm").show();
        });

        $("#hidegf").on('click', function () {
            $("#gf").hide();
        });

        $("#showgf").on('click', function () {
            $("#gf").show();
        });

        $("#sfhide").on('click', function () {
            $("#sfamily").hide();
        });

        $("#sfshow").on('click', function () {
            $("#sfamily").show();
        });


    });
</script>

<script type="text/javascript">

    $(document).ready(function () {
        
         $(function () {
            $(".datepicker1").datepicker({dateFormat: "dd-mm-yy", changeYear: true, });
        });
        
        //grand father disable
        <?php if ($this->familyInfoArray['grand_father_created_by'] != $user_id) { ?>
        $("select[name='name_title_grand_father']").prop("disabled", true);
        $("input[name='grand_father_name']").prop("disabled", true);
        $("select[name='grand_father_status']").prop("disabled", true);
        $("input[name='grand_father_dob']").prop("disabled", true);
        $("input[name='grand_father_dod']").prop("disabled", true);
        $("textarea[name='about_grand_father']").prop("disabled", true);
       
        <?php } ?>
        ////grand father disable
        
         //grand grand father disable
        <?php if ($this->familyInfoArray['grand_grand_father_created_by'] != $user_id) { ?>
        $("select[name='name_title_grand_grand_father']").prop("disabled", true);
        $("input[name='grand_grand_father_name']").prop("disabled", true);
        $("select[name='grand_grand_father_status']").prop("disabled", true);
        $("input[name='grand_grand_father_dob']").prop("disabled", true);
        $("input[name='grand_grand_father_dod']").prop("disabled", true);
        $("textarea[name='about_grand_grand_father']").prop("disabled", true);
       
        <?php } ?>
        ////grand grand father disable

        //grand mother disable
        <?php if ($this->familyInfoArray['grand_mother_created_by'] != $user_id) { ?>
        $("select[name='name_title_grand_mother']").prop("disabled", true);
        $("input[name='grand_mother_name']").prop("disabled", true);
        $("select[name='grand_mother_status']").prop("disabled", true);
        $("input[name='grand_mother_dob']").prop("disabled", true);
        $("input[name='grand_mother_dod']").prop("disabled", true);
        $("textarea[name='about_grand_mother']").prop("disabled", true);
       
        <?php } ?>
        ////grand mother disable
        
        
        //grand grand mother disable
        <?php if ($this->familyInfoArray['grand_grand_mother_created_by'] != $user_id) { ?>
        $("select[name='name_title_grand_grand_mother']").prop("disabled", true);
        $("input[name='grand_grand_mother_name']").prop("disabled", true);
        $("select[name='grand_grand_mother_status']").prop("disabled", true);
        $("input[name='grand_grand_mother_dob']").prop("disabled", true);
        $("input[name='grand_grand_mother_dod']").prop("disabled", true);
        $("textarea[name='about_grand_grand_mother']").prop("disabled", true);
       
        <?php } ?>
        ////grand grand mother disable
        
       
        //father disable
        <?php if ($this->familyInfoArray['father_created_by'] == $user_id) { ?>
                    $("#father_id").val('<?php echo $father_id; ?>');
        <?php } else { ?>
                    $("#father_id").val('');
        <?php } ?>
        <?php if ($this->familyInfoArray['father_created_by'] != $user_id) { ?>
                    $("#new_father_id").val('<?php echo $father_id; ?>');
                    $("#name_title_father").prop('title', 'hello');
                    $("#father_dob").prop('title', 'hello');
                    $("#father_status").prop('title', 'hello');
                    $("#about_father").prop('title', 'hello');
                    $("#name_title_father").prop("disabled", true);
                    $("#father_dob").prop("disabled", true);
                    $("#father_dob").datepicker("option", "disabled", true);
                    $("#father_status").prop("disabled", true);
                    $("#about_father").prop("disabled", true);
        <?php } else { ?>
                    $("#new_father_id").val('');
        <?php } ?>
         ////father disable   
         
         //mother  disable
         
         <?php if ($this->familyInfoArray['mother_created_by'] == $user_id) { ?>
                    $("#mother_id").val('<?php echo $mother_id; ?>');
        <?php } else { ?>
                    $("#mother_id").val('');
        <?php } ?>
        <?php if (isset($this->familyInfoArray['mother_created_by']) &&  $this->familyInfoArray['mother_created_by']!= $user_id) { ?>
                    $("#new_mother_id").val('<?php echo $mother_id; ?>');
                    $("#name_title_mother").prop("disabled", true);
                    $("#mother_dob").prop("disabled", true);
                    $("#mother_dob").datepicker("option", "disabled", true);
                    $("#mother_status").prop("disabled", true);
                    $("#mother_status").prop("disabled", true);
                    $("#about_mother").prop("disabled", true);
        <?php } else { ?>
                    $("#new_mother_id").val('');
        <?php } ?>   
        ////mother  disable
        
        //spouse  disable
         
         <?php if ($this->familyInfoArray['spouse_created_by'] == $user_id) { ?>
                    $("#spouse_id").val('<?php echo $spouse_id; ?>');
        <?php } else { ?>
                    $("#spouse_id").val('');
        <?php } ?>
        <?php if (isset($this->familyInfoArray['spouse_created_by']) &&  $this->familyInfoArray['spouse_created_by']!= $user_id) { ?>
                    $("#new_spouse_id").val('<?php echo $spouse_id; ?>');
                    $("#name_title_spouse").prop("disabled", true);
                    $("#spouse_dob").prop("disabled", true);
                    $("#spouse_dob").datepicker("option", "disabled", true);
                    $("#spouse_status").prop("disabled", true);
                    $("#spouse_status").prop("disabled", true);
                    $("#about_spouse").prop("disabled", true);
        <?php } else { ?>
                    $("#new_spouse_id").val('');
        <?php } ?>   
        ////spouse  disable


        //$("#new_mother_id").val('<?php //echo $mother_id; ?>');
        //$("#new_spouse_id").val('<?php //echo $spouse_id; ?>');


        $("#noofbro").change(function () {
            var broData = <?php echo $this->broDataJson ?>;
            //console.log(broData);
            var selVal = $(this).val();
            $("#textboxDiv").html('');
            //var imagePath;

            if (selVal > 0) {
                for (var i = 0; i < selVal; i++) {
                    //var broId[i]=broData[i].user_id;
                    //console.log(broData[i].image_path);  
                    //imagePath = (broData[i].image_path == null) ? "/gallery/thumb/gallery.jpg" : "/uploads/thumb/100x100/" + broData[i].image_path;
                    $("#textboxDiv").append('<div class="form-group row"><label for="brother_name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label><div class="col-sm-3 coltilte" ><select class="form-control" name="name_title_brother[]" style="padding:0;"><option>Mr</option><option>Mrs</option><option>Miss</option><option>Dr</option><option>Prof</option><option>Retd</option><option>Major</option><option>Sh</option><option>Smt</option><option>Late Sh</option><option>Late Smt</option></select></div><div class="col-sm-3 colname"><input type="text" id="brother_name_' + i + '" name="brother_name[]" class="form-control" /><input type="hidden" id="new_brother_id' + i + '" name="new_brother_id[]" class="form-control" /><div id="result_brother_' + i + '" class="result"></div><input type="hidden" name="brother_id[]" class="form-control" /></div><label for="Last Name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name'); ?></label><div class="col-sm-3"> <input type="text" name="brother_last_name[]" class="form-control"/></div></div><div class="form-group row"><label for="DOB" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label><div class="col-sm-3"> <input type="text" name="brother_dob[]" class="form-control datepicker1" /></div><div id="brother_PhotoInfoArea_' + i + '" style="display:none"><label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Photo') ?></label><div class="col-sm-3"><label>  <a href="#" name="brother_model[]" data-toggle="modal" data-target="#avatar-modal1" onclick="showcropboxbrotherdetail(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;' + i + '&quot;,&quot;' + selVal + '&quot)"><img id="brother_image_' + i + '" name="brother_image[]" src="/gallery/thumb/default_user.png" height="30" width="30" />Upload Photo</a></label></div></div> <label for="Status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label><div class="col-sm-3"><select class="form-control" id="brother_status_' + i + '" name="brother_status[]"><option value="">Select</option><option value="Employed">Employed</option><option value="Not Employed">Not Employed</option><option value="Self Employed">Self Employed</option><option value="Govt Employed">Govt Employed</option><option value="Business">Business</option><option value="Home Maker">Home Maker</option><option value="Passed Away">Passed Away</option></select></div></div><div class="form-group row"><label for="Marital Status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Marital Status'); ?></label><div class="col-sm-3"> <select class="form-control" name="marital_status_brother[]"><option>Select</option><option>Married</option><option>Never Married</option></select></div><div class="" id="brotherDodInfo' + i + '" style="display:none"><label for="DOD" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD'); ?></label><div class="col-sm-3"><input type="text" name="brother_dod[]" class="form-control datepicker1" /></div></div></div><div class="form-group row"><div id="about_brother"><label for="About Brother" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('About') ?></label><div class="col-sm-9" style="padding:0;"><textarea class="form-control" style="height:50px;" name="about_brother[]">About Brother</textarea></div></div></div></div><input name="brother_image_name[]" value="" type="hidden">');

                }
            }
            //onclick="showcropbox(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;)"
            //$( ".datepicker1" ).datepicker({ changeYear: true,dateFormat: "mm/dd/yy" });

            var brotherName = document.getElementsByName("brother_name[]");
            var brotherLastName = document.getElementsByName("brother_last_name[]");
            var brotherId = document.getElementsByName("brother_id[]");
            var nameTitleBrother = document.getElementsByName("name_title_brother[]");
            var brotherStatus = document.getElementsByName("brother_status[]");
            var brotherDob = document.getElementsByName("brother_dob[]");
            var brotherDod = document.getElementsByName("brother_dod[]");
            var brotherMaritalStatus = document.getElementsByName("marital_status_brother[]");
            var brotherAbout = document.getElementsByName("about_brother[]");
            var brotherImage = document.getElementsByName("brother_image[]");
            var brotherImageName = document.getElementsByName("brother_image_name[]");
            var brotherModel = document.getElementsByName("brother_model[]");
            var brotherNewId = document.getElementsByName("new_brother_id[]");
                        
            for (var i = 0; i < broData.length; i++) {
               // console.log(broData[i].user_id);
                brotherName[i].value = broData[i].brother_name;
                brotherLastName[i].value = broData[i].brother_last_name;
                if(broData[i].brother_created_by==userId){
                brotherId[i].value = broData[i].user_id;
                
                }else{
                    brotherId[i].value ='';
                   
                    }
                nameTitleBrother[i].value = broData[i].name_title_user;
                brotherStatus[i].value = broData[i].live_status;
                brotherDob[i].value = broData[i].dob;
                brotherDod[i].value = broData[i].dod;
                brotherMaritalStatus[i].value = broData[i].marital_status;
                brotherAbout[i].value = broData[i].about_yourself_partner_family;
                if(broData[i].brother_created_by!=userId){
                brotherNewId[i].value = broData[i].user_id;
               
                }else{
                   brotherNewId[i].value=''; 
                 
                    }
                
                // $("#".).attr('src', 'srcImage.jpg');
                imagePath = (broData[i].image_path == null) ? "/gallery/thumb/default_user.png" : "/uploads/thumb/100x100/" + broData[i].image_path;
                brotherImage[i].src = imagePath;

                //brotherModel[i].onclick = myFunction();
                var att = document.createAttribute("onclick");
                att.value = "showcropboxbrotherdetail('" + broData[i].user_id + "','" + broData[i].ref_no + "','1','','" + i + "','')";
                brotherModel[i].setAttributeNode(att);

                if (broData[i].live_status == "Passed Away") {
                    $("#brotherDodInfo" + i).css('display', 'block');
                    //console.log(broData[i].live_status);

                }
//                         $("#brother_status_"+i).on('change', function () {
//                                var status_live = $(this).val();
//                                if (status_live == "Passed Away") {
//                                    $("#brotherDodInfo").css('display', 'block');
//                                } else {
//                                    $("#brotherDodInfo").css('display', 'none');
//                                }
//                          });
               //if(broData[i].brother_created_by==){
               //alert(userId);
               if(broData[i].brother_created_by!=userId || broData[i].brother_created_by=='0'){
                nameTitleBrother[i].disabled=true;
                brotherName[i].disabled = true;
                brotherLastName[i].disabled = true;
                brotherStatus[i].disabled = true;
                brotherDob[i].disabled = true;
                brotherDod[i].disabled = true;
                brotherMaritalStatus[i].disabled = true;
                brotherAbout[i].disabled = true;
                brotherNewId[i].disabled=true;
                brotherId[i].disabled=true;
               }
              

            }
            if (selVal > 0) {
                for (var j = 0; j < selVal; j++) {

                    var att = document.createAttribute("id");
                    att.value = "brother_image_name_id_" + j;
                    brotherImageName[j].setAttributeNode(att);

                    $("#brother_status_" + j).on('change', function () {

                        var strChosen = $(this).attr('id');
                        var lastItem = strChosen.split("_").pop();
                        var status_live_again = $(this).val();
                        if (status_live_again == "Passed Away") {
                            $("#brotherDodInfo" + lastItem).css('display', 'block');
                        } else {
                            $("#brotherDodInfo" + lastItem).css('display', 'none');
                        }
                    });

                    $("#brother_name_" + j).keyup(function ()
                    {
                        var searchid = $(this).val();
                        var father_id = $('#new_father_id').val();
                        var strChosen1 = $(this).attr('id');
                        var lastItem1 = strChosen1.split("_").pop();console.log(lastItem1);
                        var updated = titleCase(searchid);
                        $(this).val(updated);
                        var type = "bro";
//alert(lastItem1);
                        $("#new_brother_id" + lastItem1).val("");
//var dataString = 'search='+ searchid;
                        if (searchid != "\'\'")
                        {
                            $.ajax({
                                type: "POST",
                                url: '<?php echo $this->basePath() ?>' + '/user/userbrosisfilters',
//data: dataString,
                                data: {search: searchid, father_id: father_id, type: type},
                                cache: false,
                                dataType: "html",
                                success: function (html)
                                {
                                    $("#result_brother_" + lastItem1).html(html).show();
                                }
                            });
                        }
                        return false;
                    });

                    $("#result_brother_" + j).on("click", function (e) {
                        var strChosen2 = $(this).attr('id');
                        var lastItem2 = strChosen2.split("_").pop();
                        var $clicked = $(e.target);
                        var $relId = $clicked.find(".name").attr('rel');
                        var $name = $clicked.find(".name").html();
                        var decoded = $("<div/>").html($name).text();
                        var $lastname = $clicked.find(".last_name").html();
                        var decodedls = $("<div/>").html($lastname).text();
                        $("#brother_name_" + lastItem2).val(decoded);
                        $("#brother_last_name_" + lastItem2).val(decodedls);
                        $("#new_brother_id" + lastItem2).val($relId);
                        $("#result_brother_" + lastItem2).fadeOut();
                    });

                    $("#brother_name_" + j).on("click", function (e) {
                        var $clicked = $(e.target);
                        if (!$clicked.hasClass("search")) {
                            $("#result_brother_" + j).fadeOut();
                        }
                    });
                    $("#brother_name_" + j).click(function () {
                        $("#result_brother_" + j).fadeIn();
                    });

                    $("#brother_name_" + j).keydown(function () {
                        var strChosen3 = $(this).attr('id');
                        var lastItem3 = strChosen3.split("_").pop();
                        $("#result_brother_" + lastItem3).fadeOut();
                    });


                }
            }
            $(".datepicker1").datepicker({dateFormat: "dd-mm-yy",
                yearRange: "c-25:c",
                changeMonth: true,
                changeYear: true});


//            $('input[name="brother_image_name[]"]').each(function() { 
//                 var itindex=$(this).index();
//                 var aValue = $(this).val(itindex); 
//            });
            //$("input[name=brother_image_name[]]").val('satya');

        });



        $("#noofsis").change(function () {
            var sisData = JSON.parse('<?php echo $this->sisDataJson ?>');
            var selVal = $(this).val();
            $("#sisterDiv").html('');
            if (selVal > 0) {
                for (var i = 0; i < selVal; i++) {
                    $("#sisterDiv").append('<div class="form-group row"><label for="sister name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Name'); ?></label><div class="col-sm-3 coltilte" ><select class="form-control" name="name_title_sister[]" style="padding:0;"><option>Mr</option><option>Mrs</option><option>Miss</option><option>Dr</option><option>Prof</option><option>Retd</option><option>Major</option><option>Sh</option><option>Smt</option><option>Late Sh</option><option>Late Smt</option></select></select></div><div class="col-sm-3 colname"><input type="text" id="sister_name_' + i + '" name="sister_name[]" class="form-control" /><input type="hidden" id="new_sister_id' + i + '" name="new_sister_id[]" class="form-control" /><div id="result_sister_' + i + '" class="result"></div><input type="hidden" name="sister_id[]" class="form-control" /></div><label for="Last Name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name'); ?></label><div class="col-sm-3"> <input type="text" name="sister_last_name[]" class="form-control"/></div></div><div class="form-group row"><label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label><div class="col-sm-3"> <input type="text" name="sister_dob[]" class="form-control datepicker1" /></div><div id="sister_PhotoInfoArea_' + i + '" style="display:none"><label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Photo') ?></label><div class="col-sm-3"><a href="#" name="sister_model[]" data-toggle="modal" data-target="#avatar-modal1" onclick="showcropbox(&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;)"><img name="sister_image[]" src="/gallery/thumb/default_user.png" height="30" width="30" />Upload Photo</a></div></div><label for="status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label><div class="col-sm-3"><select class="form-control" id="sister_status_' + i + '" name="sister_status[]"><option value="">Select</option><option value="Employed">Employed</option><option value="Not Employed">Not Employed</option><option value="Self Employed">Self Employed</option><option value="Govt Employed">Govt Employed</option><option value="Business">Business</option><option value="Home Maker">Home Maker</option><option value="Passed Away">Passed Away</option></select></div></div><div class="form-group row"><label for="Marital Status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Marital Status'); ?></label><div class="col-sm-3"> <select class="form-control" name="marital_status_sister[]"><option>Select</option><option>Married</option><option>Not-Married</option></select></div><div class="form-group row" id="sisterDodInfo' + i + '" style="display:none"><label for="DOD" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD'); ?></label><div class="col-sm-3"><input type="text" name="sister_dod[]" class="form-control datepicker1" /></div></div></div><div class="form-group row" ><div id="about_sister"><label for="About Sister" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('About') ?></label><div class="col-sm-9" style="padding:0;"><textarea name="about_sister[]" style="height:50px;" class="form-control">About Sister</textarea></div></div></div></div>');
                }
            }
            //$( ".datepicker1" ).datepicker({  changeYear: true,dateFormat: "mm/dd/yy" });

            var sisterName = document.getElementsByName("sister_name[]");
            var sisterLastName = document.getElementsByName("sister_last_name[]");
            var sisterId = document.getElementsByName("sister_id[]");
            var nameTitleSister = document.getElementsByName("name_title_sister[]");
            var sisterStatus = document.getElementsByName("sister_status[]");
            var sisterDob = document.getElementsByName("sister_dob[]");
            var sisterDod = document.getElementsByName("sister_dod[]");
            var sisterMaritalStatus = document.getElementsByName("marital_status_sister[]");
            var sisterAbout = document.getElementsByName("about_sister[]");
            var sisterImage = document.getElementsByName("sister_image[]");
            var sisterModel = document.getElementsByName("sister_model[]");
            var sisterNewId = document.getElementsByName("new_sister_id[]");

            //var photoInfoArea = document.getElementById("sister_PhotoInfoArea");
            for (var i = 0; i < sisData.length; i++) {
                //console.log(sisData[i].sister_created_by);
                var photoInfoArea = document.getElementById("sister_PhotoInfoArea_" + i);
                photoInfoArea.style.display = "none";
               // console.log(sisData[i]);
                sisterName[i].value = sisData[i].sister_name;
                sisterLastName[i].value= sisData[i].sister_last_name;
                if(sisData[i].sister_created_by==userId){
                    sisterId[i].value = sisData[i].user_id;
                
                }else{
                    sisterId[i].value ='';
                   
                }
                nameTitleSister[i].value = sisData[i].name_title_user;
                sisterStatus[i].value = sisData[i].live_status;
                sisterDob[i].value = sisData[i].dob;
                sisterDod[i].value = sisData[i].dod;
                sisterMaritalStatus[i].value = sisData[i].marital_status;
                sisterAbout[i].value = sisData[i].about_yourself_partner_family;
                if(sisData[i].sister_created_by!=userId){
                      sisterNewId[i].value = sisData[i].user_id;
               
                }else{
                   sisterNewId[i].value = '';
                 
                }
                imagePath = (sisData[i].image_path == null) ? "/gallery/thumb/default_user.png" : "/uploads/thumb/100x100/" + sisData[i].image_path;
                sisterImage[i].src = imagePath;
                var att = document.createAttribute("onclick");
                att.value = "showcropbox('" + sisData[i].user_id + "','" + sisData[i].ref_no + "','1','','" + i + "','')";
                sisterModel[i].setAttributeNode(att);

                if (sisData[i].live_status == "Passed Away") {
                    $("#sisterDodInfo" + i).css('display', 'block');
                    //console.log(broData[i].live_status);

                }
                
                if(sisData[i].sister_created_by!=userId || sisData[i].sister_created_by=='0'){
                    nameTitleSister[i].disabled=true;
                    sisterName[i].disabled = true;
                    sisterLastName[i].disabled = true;
                    sisterStatus[i].disabled = true;
                    sisterDob[i].disabled = true;
                    sisterDod[i].disabled = true;
                    sisterMaritalStatus[i].disabled = true;
                    sisterAbout[i].disabled = true;
                    sisterNewId[i].disabled=true;
                    sisterId[i].disabled=true;
               }
               

            }

            if (selVal > 0) {
                for (var j = 0; j < selVal; j++) {

//                     var att = document.createAttribute("id");     
//                         att.value = "brother_image_name_id_"+j;                           
//                         brotherImageName[j].setAttributeNode(att);

                    $("#sister_status_" + j).on('change', function () {

                        var strChosen = $(this).attr('id');
                        var lastItem = strChosen.split("_").pop();


                        var status_live_again = $(this).val();
                        if (status_live_again == "Passed Away") {
                            $("#sisterDodInfo" + lastItem).css('display', 'block');
                        } else {
                            $("#sisterDodInfo" + lastItem).css('display', 'none');
                        }
                    });



                    $("#sister_name_" + j).keyup(function ()
                    {
                        var searchid = $(this).val();
                        var father_id = $('#new_father_id').val();
                        var strChosen1 = $(this).attr('id');
                        var lastItem1 = strChosen1.split("_").pop();
                        var updated = titleCase(searchid);
                        $(this).val(updated);
                        var type = "sis";
//alert(lastItem1);
                        $("#new_sister_id" + lastItem1).val("");
//var dataString = 'search='+ searchid;
                        if (searchid != "\'\'")
                        {
                            $.ajax({
                                type: "POST",
                                url: '<?php echo $this->basePath() ?>' + '/user/userbrosisfilters',
//data: dataString,
                                data: {search: searchid, father_id: father_id, type: type},
                                cache: false,
                                dataType: "html",
                                success: function (html)
                                {
                                    $("#result_sister_" + lastItem1).html(html).show();
                                }
                            });
                        }
                        return false;
                    });

                    $("#result_sister_" + j).on("click", function (e) {
                        var strChosen2 = $(this).attr('id');
                        var lastItem2 = strChosen2.split("_").pop();
                        var $clicked = $(e.target);
                        var $relId = $clicked.find(".name").attr('rel');
                        var $name = $clicked.find(".name").html();
                        var $name = $clicked.find(".last_name").html();
                        var decoded = $("<div/>").html($name).text();
                        var decodedls = $("<div/>").html($name).text();
                        $("#sister_name_" + lastItem2).val(decoded);
                                                $("#sister_last_name_" + lastItem2).val(decodedls);
                        $("#new_sister_id" + lastItem2).val($relId);
                        $("#result_sister_" + lastItem2).fadeOut();
                    });

                    $("#sister_name_" + j).on("click", function (e) {
                        var $clicked = $(e.target);
                        if (!$clicked.hasClass("search")) {
                            $("#result_sister_" + j).fadeOut();
                        }
                    });
                    $("#sister_name_" + j).click(function () {
                        $("#result_sister_" + j).fadeIn();
                    });

                    $("#sister_name_" + j).keydown(function () {
                        var strChosen3 = $(this).attr('id');
                        var lastItem3 = strChosen3.split("_").pop();
                        $("#result_sister_" + lastItem3).fadeOut();
                    });


                }
            }
            $(".datepicker1").datepicker({dateFormat: "dd-mm-yy", changeYear: true});
        });

        $("#noofkids").change(function () {
            var kidsData = JSON.parse('<?php echo $this->kidsDataJson ?>');
           // console.log(kidsData);
            var selVal = $(this).val();
            $("#kidDiv").html('');
            if (selVal > 0) {
                for (var i = 0; i < selVal; i++) {

                    $("#kidDiv").append('<div class="form-group row"><label for="kids Name" class="col-sm-2 form-control-label edupading "><?php echo $this->translate('Name'); ?></label><div class="col-sm-3 coltilte" ><select class="form-control" name="name_title_kids[]" style="padding:0;"><option>Mr</option><option>Mrs</option><option>Miss</option><option>Dr</option><option>Mster</option></select></div><div class="col-sm-3 colname"><input type="text" id="kids_name_' + i + '" name="kids_name[]" class="form-control" /><input type="hidden" id="new_kids_id' + i + '" name="new_kids_id[]" class="form-control" /><div id="result_kids_' + i + '" class="result"></div><input type="hidden" name="kids_id[]" class="form-control" /></div><label for="last name" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Last Name') ?></label><div class="col-sm-3 "><input type="text" id="kids_last_name_' + i + '" name="kids_last_name[]" class="form-control" /></div></div><div class="form-group row"><label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label><div class="col-sm-3"> <input type="text" name="kids_dob[]" class="form-control datepicker1" /></div><div id="kids_PhotoInfoArea_' + i + '" style="display:none"><label for="photo" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Photo') ?></label><div class="col-sm-3"><label>  <a href="#" name="kids_model[]" data-toggle="modal" data-target="#avatar-modal1"><img name="kids_image[]" src="/gallery/thumb/default_user.png" height="30" width="30" />Upload Photo</a></label></div></div> <label for="status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Status') ?></label><div class="col-sm-3"><select id="kids_status_' + i + '" class="form-control" name="kids_status[]"><option value="">Select</option><option value="Student">Student</option><option value="Employed">Employed</option><option value="Not Employed">Not Employed</option><option value="Self Employed">Self Employed</option><option value="Govt Employed">Govt Employed</option><option value="Business">Business</option><option value="Home Maker">Home Maker</option><option value="Passed Away">Passed Away</option></select></div></div><div class="form-group row"><label for="Marital Status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Marital Status'); ?></label><div class="col-sm-3"> <select class="form-control" name="marital_status_kids[]"><option>Select</option><option>Married</option><option>Not-Married</option></select></div><label for="Gender Status" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Gender'); ?></label><div class="col-sm-3"> <select class="form-control" name="gender_status_kids[]"><option value="">Select</option><option value="Male">Male</option><option value="Female">Female</option></select></div></div><div class="form-group row" id="kidsDodInfo' + i + '" style="display:none"><label for="DOD" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOD'); ?></label><div class="col-sm-3"><input type="text" name="kids_dod[]" class="form-control datepicker1" /></div></div><div class="form-group row"><div id="about_kids"><label for="About Kids" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('About') ?></label><div class="col-sm-9" style="padding:0;"><textarea class="form-control" style="height:50px;" name="about_kids[]">About Kid</textarea></div></div></div></div>');
               }
            }
            //$( ".datepicker1" ).datepicker({  changeYear: true,dateFormat: "mm/dd/yy" });

            var kidsName = document.getElementsByName("kids_name[]");
            var kidsLastName = document.getElementsByName("kids_last_name[]");
            var kidsId = document.getElementsByName("kids_id[]");
            var nameTitleKids = document.getElementsByName("name_title_kids[]");
            var kidsStatus = document.getElementsByName("kids_status[]");
            var kidsDob = document.getElementsByName("kids_dob[]");
            var kidsDod = document.getElementsByName("kids_dod[]");
            var kidsMaritalStatus = document.getElementsByName("marital_status_kids[]");
            var kidsGenderStatus = document.getElementsByName("gender_status_kids[]");
            var kidsAbout = document.getElementsByName("about_kids[]");
            var kidsImage = document.getElementsByName("kids_image[]");
            var kidsModel = document.getElementsByName("kids_model[]");
            var kidsNewId = document.getElementsByName("new_kids_id[]");
            for (var i = 0; i < kidsData.length; i++) {
                var photoInfoArea = document.getElementById("kids_PhotoInfoArea_" + i);
                photoInfoArea.style.display = "none";
                kidsName[i].value = kidsData[i].kids_name;
                kidsLastName[i].value = kidsData[i].kids_last_name;
                if(kidsData[i].kids_created_by==userId){
                    kidsId[i].value = kidsId[i].user_id;
                
                }else{
                    kidsId[i].value ='';
                   
                }
                kidsId[i].value = kidsData[i].user_id;
                nameTitleKids[i].value = kidsData[i].name_title_user;
                kidsStatus[i].value = kidsData[i].live_status;
                kidsDob[i].value = kidsData[i].dob;
                kidsDod[i].value = kidsData[i].dod;
                kidsMaritalStatus[i].value = kidsData[i].marital_status;
                kidsGenderStatus[i].value = kidsData[i].gender;
                kidsAbout[i].value = kidsData[i].about_yourself_partner_family;
                if(kidsData[i].kids_created_by!=userId){
                      kidsNewId[i].value = kidsData[i].user_id;
               
                }else{
                   kidsNewId[i].value = '';
                 
                }
                
                imagePath = (kidsData[i].image_path == null) ? "/gallery/thumb/default_user.png" : "/uploads/thumb/100x100/" + kidsData[i].image_path;
                kidsImage[i].src = imagePath;
                var att = document.createAttribute("onclick");
                att.value = "showcropbox('" + kidsData[i].user_id + "','" + kidsData[i].ref_no + "','1','','')";
                kidsModel[i].setAttributeNode(att);
                if (kidsData[i].live_status == "Passed Away") {
                    $("#kidsDodInfo" + i).css('display', 'block');
                    //console.log(broData[i].live_status);
                }
                
                if(kidsData[i].kids_created_by!=userId || kidsData[i].kids_created_by=='0'){
                nameTitleKids[i].disabled=true;
                kidsName[i].disabled = true;
                kidsLastName[i].disabled = true;
                kidsStatus[i].disabled = true;
                kidsDob[i].disabled = true;
                kidsDod[i].disabled = true;
                kidsMaritalStatus[i].disabled = true;
                kidsAbout[i].disabled = true;
               }

            }
            if (selVal > 0) {
                for (var j = 0; j < selVal; j++) {

                    $("#kids_status_" + j).on('change', function () {
                        //alert(j);
                        var strChosen = $(this).attr('id');
                        var lastItem = strChosen.split("_").pop();
                        var status_live_again = $(this).val();
                        if (status_live_again == "Passed Away") {
                            $("#kidsDodInfo" + lastItem).css('display', 'block');
                        } else {
                            $("#kidsDodInfo" + lastItem).css('display', 'none');
                        }
                    });

                    $("#kids_name_" + j).keyup(function ()
                    {
                        var searchid = $(this).val();
                        var strChosen1 = $(this).attr('id');
                        var lastItem1 = strChosen1.split("_").pop();
//alert(lastItem1);
                        var updated = titleCase(searchid);
                        $(this).val(updated);
                        var dataString = 'search=' + searchid;
                        $("#new_kids_id" + lastItem1).val("");
                        if (searchid != "\'\'")
                        {
                            $.ajax({
                                type: "POST",
                                url: '<?php echo $this->basePath() ?>' + '/user/userkidsfilters',
                                data: dataString,
                                cache: false,
                                dataType: "html",
                                success: function (html)
                                {
                                    //$("#result_kids_" + lastItem1).html(html).show();
                                }
                            });
                        }
                        return false;
                    });

                    $("#result_kids_" + j).on("click", function (e) {
                        var strChosen2 = $(this).attr('id');
                        var lastItem2 = strChosen2.split("_").pop();
                        var $clicked = $(e.target);
                        var $relId = $clicked.find(".name").attr('rel');
                        var $name = $clicked.find(".name").html();
                        var decoded = $("<div/>").html($name).text();
                        var $last_name = $clicked.find(".last_name").html();
                        var decodedls = $("<div/>").html($last_name).text();
                        $("#kids_name_" + lastItem2).val(decoded);
                        $("#kids_last_name_" + lastItem2).val(decodedls);
                        $("#new_kids_id" + lastItem2).val($relId);
                        $("#result_kids_" + lastItem2).fadeOut();
                    });

                    $("#kids_name_" + j).on("click", function (e) {
                        var $clicked = $(e.target);
                        if (!$clicked.hasClass("search")) {
                            $("#result_kids_" + j).fadeOut();
                        }
                    });
                    $("#kids_name_" + j).click(function () {
                        $("#result_kids_" + j).fadeIn();
                    });

                    $("#kids_name_" + j).keydown(function () {
                        var strChosen2 = $(this).attr('id');
                        var lastItem2 = strChosen2.split("_").pop();
                        $("#result_kids_" + lastItem2).fadeOut();
                    });


                }
            }
            $(".datepicker1").datepicker({dateFormat: "dd-mm-yy", changeYear: true});
        });

        $("#noofSpsis").change(function () {
            var selVal = $(this).val();
            $("#spouceSDiv").html('');
            if (selVal > 0) {
                for (var i = 1; i <= selVal; i++) {
                    $("#spouceSDiv").append('<div class="form-group row"><label for="grand_fatherName" class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Spouse Sister Name'); ?></label><div class="col-sm-3 coltilte" ><select class="form-control" name="name_title_S_sister[]" style="padding:0;"><option>Mrs</option><option>Miss</option><option>Dr.</option></select></div><div class="col-sm-3 colname"><input type="text" name="S_sister_name[]" class="form-control" /></div><label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Spouse Sister Status') ?></label><div class="col-sm-3"><select class="form-control" name="S_sister_status[]"><option>Select</option><option>Alive</option><option>Passed Away</option></select></div></div><div class="form-group row"><label for="Alt. Mobile No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('DOB'); ?></label><div class="col-sm-3"> <input type="text" name="S_sister_dob[]" class="form-control datepicker1" /></div><div id="mother_AliveInfoArea"><label for="Phone No." class="col-sm-2 form-control-label edupading"><?php echo $this->translate('Spouse Sister Photo') ?></label><div class="col-sm-3"><label>  <a href="#" data-toggle="modal" data-target="#avatar-modal1" onclick="showcropbox(&quot;S_sister_photo&quot;,&quot;tbl_family_info&quot;)"><img src="<?php echo $this->basePath() ?>/gallery/thumb/default_user.png" height="30" width="30" />Upload Photo</a></label></div></div></div>');
                }
            }
            //$( ".datepicker1" ).datepicker({  changeYear: true,dateFormat: "mm/dd/yy" });

        });
    });
</script>

<script>
//***************hide spouse and kids if user is unmarried*********
    var rdtype1 = '<?php echo $this->userInfo->getMaritalStatus(); ?>';
    //alert(rdtype1);
    if (rdtype1 == "Single" || rdtype1 == "") {
        $(".Family_Details_married").css('display', 'none');
    }

    $(".mrtlrd").on('click', function () {
        var rdtype = $(this).val();
        if (rdtype == "Never Married") {
            $(".Family_Details_married").css('display', 'none');
        } else {
            $(".Family_Details_married").css('display', 'block');
        }
    });

    if ($('input[name="marital_status"]').is(':checked')) {
        //alert($('input[name="marital_status"]:checked').val());
        $('input[name="marital_status"]:checked').trigger("click");
    }

//***********************Hide Date of death aria on change status***********//
    $("#spouse_status").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#spouse_dod_row").css('display', 'block');
        } else {
            $("#spouse_dod_row").css('display', 'none');
        }
    });
    $("#father_status").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#father_dod_row").css('display', 'block');
        } else {
            $("#father_dod_row").css('display', 'none');
        }
    });



    $("#mother_status").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#mother_dod_row").css('display', 'block');
        } else {
            $("#mother_dod_row").css('display', 'none');
        }
    });

    $("#grand_father_status").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#g_father_dod_row").css('display', 'block');
        } else {
            $("#g_father_dod_row").css('display', 'none');
        }
    });
    $("#grand_mother_status").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#g_mother_dod_row").css('display', 'block');
        } else {
            $("#g_mother_dod_row").css('display', 'none');
        }
    });
    $("#grand_grand_father_status").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#gg_father_dod_row").css('display', 'block');
        } else {
            $("#gg_father_dod_row").css('display', 'none');
        }
    });
    $("#grand_grand_mother_status").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#gg_mother_dod_row").css('display', 'block');
        } else {
            $("#gg_mother_dod_row").css('display', 'none');
        }
    });
    $("#spouse_fatherStatus").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#spouse_father_dod_row").css('display', 'block');
        } else {
            $("#spouse_father_dod_row").css('display', 'none');
        }
    });
    $("#spouse_motherStatus").on('change', function () {
        var status_live = $(this).val();
        if (status_live == "Passed Away") {
            $("#spouse_mother_dod_row").css('display', 'block');
        } else {
            $("#spouse_mother_dod_row").css('display', 'none');
        }
    });
</script>

<script type="text/javascript">
    $(document).ready(function (e) {
        $("#uploadImgForm").on('submit', (function (e) {
            e.preventDefault();
            $.ajax({
                url: '<?php echo $this->basePath() . '/account/AjaxImgUploadGallery' ?>',
                type: "POST",
                data: new FormData(this),
                contentType: false,
                cache: false,
                processData: false,
                success: function (response) {
                    if (response.Status != "false") {
                        $('#targetLayer').removeClass('alert alert-danger');
                        $('#targetLayer').addClass('alert alert-success').text(response.message);
                        setTimeout(function () {
                            window.location.href = "<?php echo $this->basePath() . '/account/mygallery' ?>";
                        }, 4000);
                        /* $('#gallery_images').empty();
                         jQuery.each(response.gallery_data , function(index, value){
                         $('#gallery_images').append("<div class='col-xs-4'><div class='col-xs-12'><a href='<?php echo ROOT_PATH ?>'+value['image_path']+ title='' data-gallery=''><img src='<?php echo ROOT_PATH ?>'+value['image_path']+ class='img-responsive' /><div class='img-title'>Category 1</div></a></div></div>"); 
                         }); */
                    } else {
                        $('#targetLayer').addClass('alert alert-danger').text(response.message);
                    }
                },
                error: function (error) {
                    alert(error);
                }
            });
        }));

    });
</script>

<script>
    $(document).ready(function () {

        var event = new Event('change');
        document.getElementById('noofbro').dispatchEvent(event);
        document.getElementById('noofsis').dispatchEvent(event);
        document.getElementById('noofkids').dispatchEvent(event);

        //var noofbro=$('#noofbro').val();
        //var noofsis=$('#noofsis').val();
        //$('#noofbro').change();
//e.stopPropagation();
        // $('#noofsis').change();
        // $('#noofbro').change();
        // $('#noofbro, #noofsis').trigger("change");
        //alert(noofsis);
//    if(noofbro>0){
//        //alert('satya');
//        $('#noofbro').trigger("change");
//    }

        //$('#noofsis').val(1).trigger("change");

    });


</script>
<script>
//$(document).ready(function() {
//  
//    var noofsis=$('#noofsis').val();
// 
//    
//        alert('satya');
//        $('#noofsis').val(1).trigger("change");
//   
//});

    function displayDod(val, countNum) {

        var status_live_again = val;
        if (status_live_again == "Passed Away") {
            $("#brotherDodInfo" + countNum).css('display', 'block');
        } else {
            $("#brotherDodInfo" + countNum).css('display', 'none');
        }
    }
</script>
<script>
    $("#spouse_name").keyup(function ()
    {
       //$("#new_spouse_id").val("");
        var searchid = $(this).val();
        var updated = titleCase(searchid);
        $(this).val(updated);
        var dataString = 'search=' + searchid + '&gender=<?php echo $userInfo->getGender(); ?>';
        console.log(dataString);
        if (searchid != "\'\'")
        {
            $.ajax({
                type: "POST",
                url: '<?php echo $this->basePath() ?>' + '/user/userspousefilters',
                data: dataString,
                cache: false,
                dataType: "html",
                success: function (html)
                {
                    $("#result_spouse").html(html).show();
                }
            });
        }
        return false;
    });


    $("#result_spouse").on("click", function (e) {
        var $clicked = $(e.target);
        var $relId = $clicked.find(".name").attr('rel');
        var $name = $clicked.find(".name").html();
        var $lastname = $clicked.find(".last_name").html('rel');
        var decoded = $("<div/>").html($name).text();
        var udataSerl = JSON.parse($clicked.find(".udata").val());
        var d = new Date(udataSerl.dob);

        console.log(udataSerl);

        $("#new_spouse_id").val($relId);
        $("#spouse_id").val("");
        $("#name_title_spouse").val(udataSerl.name_title_user);
        $("#spouse_name").val(udataSerl.full_name);
        $("#spouse_last_name").val(udataSerl.last_name);
       
        $("#name_title_spouse").prop("disabled", true);


        $("#spouse_dob").val(d.getDate() + "-" + (d.getMonth() + 1) + "-" + d.getFullYear());
        $("#spouse_dob").datepicker("option", "disabled", true);

        $("#spouse_status").val(udataSerl.live_status);
        $("#spouse_status").prop("disabled", true);


        $("#about_spouse").val(udataSerl.about);
        $("#about_spouse").prop("disabled", true);

        $("#result_spouse").fadeOut();
    });
    $("#result_spouse").on("click", function (e) {
        var $clicked = $(e.target);
        if (!$clicked.hasClass("search")) {
            $("#result_spouse").fadeOut();
        }
    });
    $("#spouse_name").click(function () {
        $("#result_spouse").fadeIn();
    });

    $("#spouse_name").keydown(function () {
        $("#result_spouse").fadeOut();
        <?php if ($this->familyInfoArray['spouse_created_by'] == $user_id) { ?>
            $("#name_title_spouse").prop("disabled", false);
            $("#spouse_dob").datepicker("option", "disabled", false);
            $("#spouse_status").prop("disabled", false);
            $("#about_spouse").prop("disabled", false);

            $('#spouse_id').val('<?php echo $spouse_id; ?>');
            $('#new_spouse_id').val('');
            $('#name_title_spouse').val('<?php echo $this->familyInfoArray['name_title_spouse']; ?>');
            $('#spouse_status').val('<?php echo $this->familyInfoArray['mother_status']; ?>');
            $("#spouse_dob").val('<?php echo $this->MyHelper()->myDate($this->familyInfoArray["spouse_dob"]); ?>');
            $("#spouse_dod").val('<?php echo $this->MyHelper()->myDate($this->familyInfoArray["spouse_dod"]); ?>');
            $('#about_spouse').val('<?php echo $this->familyInfoArray['about_spouse']; ?>');
       <?php } ?>
    });


    $("#father_name").keyup(function ()
    {
        //$("#new_father_id").val("");


        var searchid = $(this).val();
        var updated = titleCase(searchid);
        $(this).val(updated);
        var dataString = 'search=' + searchid;
        if (searchid != "\'\'")
        {
            $.ajax({
                type: "POST",
                url: '<?php echo $this->basePath() ?>' + '/user/userfilters',
                data: dataString,
                cache: false,
                dataType: "html",
                success: function (html)
                {
                    $("#result_father").html(html).show();
                }
            });
        }
        return false;
    });

    $("#result_father").on('click', function (e) {
        // alert('satya');
        var $clicked = $(e.target);
        var $relId = $clicked.find(".name").attr('rel');
        var $name = $clicked.find(".name").html();
        var $dob = $clicked.find(".dob").attr('rel');
        var decoded = $("<div/>").html($name).text();
        var udataSerl = JSON.parse($clicked.find(".udata").val());
        var d = new Date(udataSerl.dob);

        //console.log(udataSerl);

        $("#new_father_id").val($relId);
        $("#father_id").val("");

        $("#father_name").val(udataSerl.full_name);
        $("#father_last_name").val(udataSerl.last_name);

        $("#name_title_father").val(udataSerl.name_title_user);
        $("#name_title_father").prop("disabled", true);


        $("#father_dob").val(d.getDate() + "-" + (d.getMonth() + 1) + "-" + d.getFullYear());
        $("#father_dob").datepicker("option", "disabled", true);

        $("#father_status").val(udataSerl.live_status);
        $("#father_status").prop("disabled", true);

        $("#father_status").val(udataSerl.live_status);
        $("#father_status").prop("disabled", true);

        $("#about_father").val(udataSerl.about);
        $("#about_father").prop("disabled", true);

        $("#result_father").fadeOut();
    });
    $("#result_father").on("click", function (e) {
        var $clicked = $(e.target);
        if (!$clicked.hasClass("search")) {
            $("#result_father").fadeOut();
        }
    });

    $("#result_father").keydown(function () {
        $("#result_father").fadeOut();
    });

    $("#father_name").keydown(function () {
        $("#result_father").fadeOut();


//        $("#name_title_father").prop("disabled", false);
//        //$('#name_title_father').find('option:first').attr('selected', 'selected');
//
//        $("#father_dob").datepicker("option", "disabled", false);
//        //$("#father_dob").val('00-00-0000');
//
//        $("#father_status").prop("disabled", false);
//        //$('#father_status').find('option:first').attr('selected', 'selected');
//
//        $("#about_father").prop("disabled", false);
//        //$("#about_father").val('');
<?php if ($this->familyInfoArray['father_created_by'] == $user_id) { ?>
            $("#name_title_father").prop("disabled", false);
            $("#father_dob").datepicker("option", "disabled", false);
            $("#father_status").prop("disabled", false);
            $("#about_father").prop("disabled", false);

            $('#father_id').val('<?php echo $father_id; ?>');
            $('#new_father_id').val('');
            $('#name_title_father').val('<?php echo $this->familyInfoArray['name_title_father']; ?>');
            $('#father_status').val('<?php echo $this->familyInfoArray['father_status']; ?>');
            $("#father_dob").val('<?php echo $this->MyHelper()->myDate($this->familyInfoArray["father_dob"]); ?>');
            $("#father_dod").val('<?php echo $this->MyHelper()->myDate($this->familyInfoArray["father_dod"]); ?>');
            $('#about_father').val('<?php echo $this->familyInfoArray['about_father']; ?>');
<?php } ?>

    });



    $("#mother_name").keyup(function ()
    {
        //$("#new_mother_id").val("");
        var searchid = $(this).val();
        var updated = titleCase(searchid);
        $(this).val(updated);
        var dataString = 'search=' + searchid;
        if (searchid != "\'\'")
        {
            $.ajax({
                type: "POST",
                url: '<?php echo $this->basePath() ?>' + '/user/userMotherFilters',
                data: dataString,
                cache: false,
                dataType: "html",
                success: function (html)
                {
                    console.log(html);
                    $("#result_mother").html(html).show();
                }
            });
        }
        return false;
    });

    $("#result_mother").on("click", function (e) {
        var $clicked = $(e.target);
        var $relId = $clicked.find(".name").attr('rel');
        var $name = $clicked.find(".name").html();
        var $relId = $clicked.find(".lastname").attr('rel');
        var $lastname = $clicked.find(".lastname").html();
        var decoded = $("<div/>").html($name).text();
        var udataSerl = JSON.parse($clicked.find(".udata").val());
        var d = new Date(udataSerl.dob);

       // console.log(udataSerl);

        
        $("#new_mother_id").val($relId);
        $("#mother_id").val("");

        $("#mother_name").val(udataSerl.full_name);
        $("#mother_last_name").val(udataSerl.last_name);
        $("#name_title_mother").val(udataSerl.name_title_user);
        $("#name_title_mother").prop("disabled", true);


        $("#mother_dob").val(d.getDate() + "-" + (d.getMonth() + 1) + "-" + d.getFullYear());
        $("#mother_dob").datepicker("option", "disabled", true);

        $("#mother_status").val(udataSerl.live_status);
        $("#mother_status").prop("disabled", true);


        $("#about_mother").val(udataSerl.about);
        $("#about_mother").prop("disabled", true);

        $("#result_mother").fadeOut();
    });
    $("#result_mother").on("click", function (e) {
        var $clicked = $(e.target);
        if (!$clicked.hasClass("search")) {
            $("#result_mother").fadeOut();
        }
    });

    $("#result_mother").keydown(function () {
        $("#result_mother").fadeOut();
    });

    $("#mother_name").keydown(function () {
        $("#result_mother").fadeOut();
        <?php if ($this->familyInfoArray['mother_created_by'] == $user_id) { ?>
            $("#name_title_mother").prop("disabled", false);
            $("#mother_dob").datepicker("option", "disabled", false);
            $("#mother_status").prop("disabled", false);
            $("#about_mother").prop("disabled", false);

            $('#mother_id').val('<?php echo $mother_id; ?>');
            $('#new_mother_id').val('');
            $('#name_title_mother').val('<?php echo $this->familyInfoArray['name_title_mother']; ?>');
            $('#mother_status').val('<?php echo $this->familyInfoArray['mother_status']; ?>');
            $("#mother_dob").val('<?php echo $this->MyHelper()->myDate($this->familyInfoArray["mother_dob"]); ?>');
            $("#mother_dod").val('<?php echo $this->MyHelper()->myDate($this->familyInfoArray["mother_dod"]); ?>');
            $('#about_mother').val('<?php echo $this->familyInfoArray['about_mother']; ?>');
       <?php } ?>
    });

</script>
